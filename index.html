<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>.</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="icon.ico" type="image/x-icon" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet" />

  <style>
    body {
      margin: 0;
      background: black;
      color: gray;
      font-family: Arial, sans-serif;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      cursor: pointer;
    }

    img {
      max-width: 300px;
      user-select: none;
      pointer-events: none;
      opacity: 1;
    }

    audio {
      display: none;
    }

    body.before-click,
    body.paused {
      cursor: pointer;
    }

    body.playing {
      cursor: default;
    }

    #click-hint {
      position: absolute;
      top: 30px;
      font-size: 2rem;
      color: white;
      font-family: 'Orbitron', sans-serif;
      opacity: 0;
      transition: opacity 0.5s ease;
      pointer-events: none;
    }

    #click-hint.visible {
      opacity: 1;
    }

    #click-hint.fade-out {
      opacity: 0;
    }

    .gif-paused {
      image-rendering: pixelated;
      filter: grayscale(100%) brightness(50%);
    }

    #footer {
      position: absolute;
      bottom: 10px;
      font-size: 0.75rem;
      color: #888;
      user-select: none;
      text-decoration: none;
      cursor: pointer;
      transition: color 0.2s ease;
    }

    #footer:hover {
      color: white;
    }
  </style>
</head>
<body class="before-click">

  <div id="click-hint">click it</div>
  <img id="troll" src="troll.gif" alt="troll" class="gif-paused" />
  <a id="footer" href="https://veeti.cc/" target="_blank">veetiq</a>
  <audio id="audio" src="song.mp3" preload="auto"></audio>

  <script>
    const audio = document.getElementById("audio");
    const troll = document.getElementById("troll");
    const hint = document.getElementById("click-hint");
    const body = document.body;
    const footer = document.getElementById("footer");

    let isPlaying = false;
    let clicked = false;
    let userPaused = false;

    const hintTimeout = setTimeout(() => {
      if (!clicked) {
        hint.classList.add("visible");
      }
    }, 3000);

    footer.addEventListener("click", (e) => {
      e.stopPropagation();
    });

    document.body.addEventListener("click", () => {
      clicked = true;

      if (hint.classList.contains("visible")) {
        hint.classList.remove("visible");
        hint.classList.add("fade-out");
      }

      if (!isPlaying) {
        audio.play().catch(() => {});
        troll.classList.remove("gif-paused");
        body.classList.remove("before-click", "paused");
        body.classList.add("playing");
        isPlaying = true;
        userPaused = false;
      } else {
        audio.pause();
        troll.classList.add("gif-paused");
        body.classList.remove("playing");
        body.classList.add("paused");
        isPlaying = false;
        userPaused = true;
      }
    });

    const frames = ["anti", "troll"];
    let i = 0;
    setInterval(() => {
      document.title = frames[i % frames.length];
      i++;
    }, 1000);

    document.addEventListener("visibilitychange", () => {
      if (document.hidden) {
        if (isPlaying) {
          audio.pause();
        }
      } else {
        if (isPlaying && !userPaused) {
          audio.play().catch(() => {});
        }
      }
    });
  </script>

</body>
</html>
